<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="who&apos;s your daddy?">
<meta property="og:type" content="website">
<meta property="og:title" content="Blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Blog">
<meta property="og:description" content="who&apos;s your daddy?">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Blog">
<meta name="twitter:description" content="who&apos;s your daddy?">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-102257497-2', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f11380fcb075224d78c5110a02679bd1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/24/recording/git操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rni-L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/24/recording/git操作/" itemprop="url">git操作</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-24T23:56:01+08:00">
                2017-08-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/记录/" itemprop="url" rel="index">
                    <span itemprop="name">记录</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/24/recording/git操作/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/24/recording/git操作/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/08/24/recording/git操作/" class="leancloud_visitors" data-flag-title="git操作">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="git日常操作"><a href="#git日常操作" class="headerlink" title="git日常操作"></a>git日常操作</h1><ul>
<li>删除：git rm</li>
<li>删除文件夹： git rm -r</li>
</ul>
<h2 id="打标签"><a href="#打标签" class="headerlink" title="打标签"></a>打标签</h2><ul>
<li>查看标签： git tag</li>
<li>新建标签： git tag -a v1.0 -m ‘…’</li>
<li>推送标签： git push origin v1.0</li>
</ul>
<h2 id="回滚"><a href="#回滚" class="headerlink" title="回滚"></a>回滚</h2><ul>
<li>回滚：git revert</li>
<li>回滚报错取消：git revert –abort</li>
</ul>
<p>git revert回滚操作，只能一级一级的回滚，不能跳级回滚</p>
<h2 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a>忽略文件</h2><p>.gitignore</p>
<p>如果要忽略某个原本已经在仓库的文件，要先删除它才行</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/21/recording/lowdb使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rni-L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/21/recording/lowdb使用/" itemprop="url">lowdb使用</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-21T21:04:49+08:00">
                2017-08-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/记录/" itemprop="url" rel="index">
                    <span itemprop="name">记录</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/21/recording/lowdb使用/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/21/recording/lowdb使用/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/08/21/recording/lowdb使用/" class="leancloud_visitors" data-flag-title="lowdb使用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><pre><code>cnpm i lowdb --save-dev


// nodejs
const low = require(&apos;lowdb&apos;)
const FileSync = require(&apos;lowdb/adapters/FileSync&apos;)
// 进行异步模式
const adapter = new FileSync(&apos;db.json&apos;)
// 实例一个db对象
const db = low(adapter)
// 设置默认值，并写入
db.defaults({
  banner: [],
  category: [],
  product: [],
  usre: []
}).write()
</code></pre><p><code>db.get(&#39;banner[0]&#39;), db.get(&#39;user.title&#39;), db.get(&#39;banner[0].title&#39;)</code>，都是获取某个值，最后要加上<code>.value()</code></p>
<p><code>db.getState()</code>，查看db的状态</p>
<p><code>db.setState({})</code>，清空db</p>
<p><code>db.write().id</code>，自动插入随机id值</p>
<p><code>db.has(&#39;posts&#39;).value()</code>，判断是否有这个值</p>
<p><code>db.set(&#39;posts&#39;, []).write()</code>，将<code>posts</code>值设置为[]</p>
<p>使用<code>.push()</code>插入数据，在插入数据前，要先<code>get(&#39;filed&#39;)</code>，声明向谁插入，最后就写入<code>write()</code></p>
<p><code>db.get(&#39;banner&#39;).size().value()</code>，获取banner有多少条数据</p>
<p><code>db.get(&#39;posts&#39;).find({ title: &#39;low!&#39; }).assign({ title: &#39;hi!&#39;}).write()</code>，获取<code>posts</code>字段，搜索<code>title</code>为’low!’的值，替换成’hi!’，最后写入</p>
<p><code>db.get(&#39;posts&#39;).remove({ title: &#39;low!&#39; }).write()</code> ，删除</p>
<p><code>db.unset(&#39;user.name&#39;).write()</code>，删除一个字段</p>
<h1 id="发现个严重问题"><a href="#发现个严重问题" class="headerlink" title="发现个严重问题"></a>发现个严重问题</h1>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/10/recording/mongoose的使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rni-L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/10/recording/mongoose的使用/" itemprop="url">mongoose的使用</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-10T11:14:37+08:00">
                2017-08-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/记录/" itemprop="url" rel="index">
                    <span itemprop="name">记录</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/10/recording/mongoose的使用/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/10/recording/mongoose的使用/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/08/10/recording/mongoose的使用/" class="leancloud_visitors" data-flag-title="mongoose的使用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>学习了mongodb后，接着就是和nodejs进行对接，怎么在nodejs上使用mongodb。我这里选择的是mongoose，至于为啥，可能教程稍微多点吧。不过，这个mongoose还是有点复杂的。。。</p>
</blockquote>
<p><a href="http://mongoosejs.com/docs/guide.html" target="_blank" rel="external">官方文档</a></p>
<p><a href="https://mongoose.shujuwajue.com/guide/schemas.html" target="_blank" rel="external">中文文档</a></p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><pre><code>// 安装包
npm i mongoose -S
</code></pre><p>我nodejs使用的框架是<code>express</code>。</p>
<pre><code>// 首先导入mongoose
var mongoose = require(&apos;mongoose&apos;)
// 实例化一个骨架
var Schema = mongoose.Schema
/*
  Schema里面的参数，{ paw: String }
  是规定，执行操作的时，约定的字段和类型
  让格式更清晰吧
  而且可以定义默认值
*/
var testSchema = new Schema({
  name: { type: String, default: &apos;Val&apos;},
  paw: String
})

/* 
  为&quot;users&quot;的model，添加自定义方法
  这个&quot;users&quot;是你要操作的集合（collection）
*/
testSchema.methods.findSimilarTypes = function(cb) {
  // .find({})这些就跟操作mongodb时一样了，cb就是回调函数
  return this.model(&apos;users&apos;).find({ name: this.name }, cb)
}
testSchema.methods.findSimilarTypes2 = function(cb) {
  return this.model(&apos;users&apos;).find({ paw: this.paw }, cb)
}

// 将骨架发布为model，同理这个&quot;users&quot;是要操作的集合
var Test = mongoose.model(&apos;users&apos;, testSchema)

// 实例一个实体(entity)，传一个{}参数
var _entity = new Test({ name: &apos;232&apos;, paw: &apos;22&apos; })

// 执行之前定义的方法，打印获取到的数据
_entity.findSimilarTypes2(function(err, data) {
  console.log(data)
})
</code></pre><p>总结下：</p>
<ol>
<li>首先定义一个骨架，约定好字段和字段的类型(String, Array, Number这些，还有很多种)</li>
<li>为这个骨架添加自定义方法，这里就是要对数据库CRUD了</li>
<li>然后根据这个骨架，发布一个model，对要操作的数据库，定义好</li>
<li>接着就实例一个实体（entity），传入之前约定好的字段</li>
<li>最后就是执行之前自定义好的方法，获取到数据</li>
</ol>
<p>还有，不一定使用自定义方法，mongoose内置很多定义的方法</p>
<p>下面我们详细说下每个东西的详细值</p>
<h2 id="Schema"><a href="#Schema" class="headerlink" title="Schema"></a>Schema</h2><p>Schema，就是这个操作的骨架，形式，约定好字段和字段的类型。例如在后面的操作，会出现什么字段，是什么类型的，一些操作，都在这里定义好。</p>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><ul>
<li>String</li>
<li>Number</li>
<li>Date</li>
<li>Buffer</li>
<li>Boolean</li>
<li>Mixed</li>
<li>Objectid</li>
<li><p>Array</p>
<p>  new Schema({</p>
<pre><code>name: String,
data: Array,
list: {
  type: Array,
  default: [1, 2, 3]
}
msg: {
  type: String,
  default: &apos;abc&apos;,
  lowercase: true, // 小写
  trim: true // 去空格
},
updated: { type: Date, default: Date.now },
age: { type: Number, min: 18, max: 65 },
</code></pre><p>  })</p>
</li>
</ul>
<p>可以看到，有很多内置方法，这些都能减轻工作</p>
<h2 id="model"><a href="#model" class="headerlink" title="model"></a>model</h2><h3 id="内置方法"><a href="#内置方法" class="headerlink" title="内置方法"></a>内置方法</h3><p>先定义个骨架</p>
<pre><code>var User = new Schema({
  name: String,
  pwd: String,
  avatar: String,
  createdTime: {
    type: Date,
    default: Date.now
  },
  email: String,
  token: String
})
</code></pre><p>再生成一个model</p>
<pre><code>var Test = mognoose.model(&apos;user&apos;, User)
</code></pre><p>使用内置的方法</p>
<pre><code>Test.find(function(error, data){
  console.log(data)
})
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/07/recording/微信小程序学习记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rni-L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/07/recording/微信小程序学习记录/" itemprop="url">微信小程序学习记录</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-07T15:18:25+08:00">
                2017-08-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/记录/" itemprop="url" rel="index">
                    <span itemprop="name">记录</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/07/recording/微信小程序学习记录/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/07/recording/微信小程序学习记录/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/08/07/recording/微信小程序学习记录/" class="leancloud_visitors" data-flag-title="微信小程序学习记录">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>公司要开发个小程序官网，所以就学习下微信小程序，顺带记录一下要点</p>
</blockquote>
<h1 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h1><h2 id="根目录"><a href="#根目录" class="headerlink" title="根目录"></a>根目录</h2><ul>
<li>app.js - 入口文件</li>
<li>app.json - 配置文件</li>
<li>app.wxss - css主体</li>
</ul>
<h3 id="app-json"><a href="#app-json" class="headerlink" title="app.json"></a>app.json</h3><p>决定页面文件的路径、窗口表现、设置网络超时时间、设置多 tab 、是否开启debug模式</p>
<h4 id="pages"><a href="#pages" class="headerlink" title="pages"></a>pages</h4><p>整个小程序的路由配置</p>
<h4 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h4><p>用于设置小程序的状态栏、导航条、标题、窗口背景色</p>
<h4 id="tabBar"><a href="#tabBar" class="headerlink" title="tabBar"></a>tabBar</h4><p>底部tabBar设置</p>
<h4 id="networkTimeout"><a href="#networkTimeout" class="headerlink" title="networkTimeout"></a>networkTimeout</h4><p>网络请求的设置</p>
<h4 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h4><p>调试信息以info输出到控制面板</p>
<p>页面配置：</p>
<p>每个页面由4个文件组成：js、wxml、wxss、json。分别对应的是逻辑、结果、样式、配置</p>
<h1 id="逻辑层"><a href="#逻辑层" class="headerlink" title="逻辑层"></a>逻辑层</h1><p><code>App()</code>用来注册小程序，接受一个object参数</p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><pre><code>App({
  onLaunch: function(options) {
    // 初始化，页面还没生成
  },
  onShow: function(options) {
      // 从后台进入前台显示
  },
  onHide: function() {
      // 从前台进入后台
  },
  onError: function(msg) {
    console.log(msg)
  },
  // 可以添加任意的数据进入参数里，然后通过this调用
  globalData: &apos;I am global data&apos;
})

// 全局函数
getApp()
</code></pre><p>在<code>onLaunch()</code>和<code>onShow</code>的参数可以获取一些信息数据、场景值</p>
<h2 id="页面注册"><a href="#页面注册" class="headerlink" title="页面注册"></a>页面注册</h2><pre><code>Page({
  data: {
    // 声明属性
    text: &quot;This is page data.&quot;
  },
  // 注册页面的生命周期
  onLoad: function(options) {
    // Do some initialize when page load.
  },
  onReady: function() {
    // Do something when page ready.
  },
  onShow: function() {
    // Do something when page show.
  },
  onHide: function() {
    // Do something when page hide.
  },
  onUnload: function() {
    // Do something when page close.
  },
  onPullDownRefresh: function() {
    // Do something when pull down.
  },
  onReachBottom: function() {
    // Do something when page reach bottom.
  },
  onShareAppMessage: function () {
   // return custom share data when user share.
  },
  onPageScroll: function() {
    // Do something when page scroll
  },
  // 自定义事件
  viewTap: function() {
    this.setData({
      text: &apos;Set some data for updating view.&apos;
    })
  },
  customData: {
    hi: &apos;MINA&apos;
  }
})
</code></pre><h2 id="api"><a href="#api" class="headerlink" title="api"></a>api</h2><p>使用<code>wx.openLocation</code>进行地图导航的跳转</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/04/recording/nodejs的学习和使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rni-L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/04/recording/nodejs的学习和使用/" itemprop="url">nodejs的学习和使用</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-04T16:52:41+08:00">
                2017-08-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/记录/" itemprop="url" rel="index">
                    <span itemprop="name">记录</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/04/recording/nodejs的学习和使用/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/04/recording/nodejs的学习和使用/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/08/04/recording/nodejs的学习和使用/" class="leancloud_visitors" data-flag-title="nodejs的学习和使用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>记录一些nodejs学习的内容</p>
</blockquote>
<p>这篇文字，是(<a href="https://github.com/nswbmw/N-blog/)[https://github.com/nswbmw/N-blog/]这里进行学习nodejs，进行归纳的" target="_blank" rel="external">https://github.com/nswbmw/N-blog/)[https://github.com/nswbmw/N-blog/]这里进行学习nodejs，进行归纳的</a></p>
<h1 id="使用express"><a href="#使用express" class="headerlink" title="使用express"></a>使用express</h1><p>cnpm i express –save</p>
<p>新建<code>index.js</code>文件</p>
<pre><code>var express = require(&apos;express&apos;)
var app = express()

app.get(&apos;/&apos;, function(req, res) {
  res.send(&apos;hello, 11&apos;)
})

app.listen(3000)
</code></pre><p>开启服务：<code>node indexjs</code></p>
<h1 id="supervisor"><a href="#supervisor" class="headerlink" title="supervisor"></a>supervisor</h1><p>安装在全局下：<code>npm install -g supervisor</code></p>
<p>启动程序：<code>supervisor --harmony index</code></p>
<p>这个包的作用，当你更改后，刷新网页会更新，而不用重新开启服务才刷新</p>
<h1 id="ejs"><a href="#ejs" class="headerlink" title="ejs"></a>ejs</h1><p><code>cnpm i ejs -S</code></p>
<p>安装<code>ejs</code>，可以使用模板引擎，进行服务的渲染</p>
<pre><code>// 路由
router.get(&apos;/:name&apos;, function(req, res) {
  // 进行渲染
  res.render(&apos;users&apos;, {
    name: req.params.name
  })
})

// 模板文件（users.ejs)
&lt;h1&gt;&lt;%= name.toUpperCase() %&gt;&lt;/h1&gt;
&lt;p&gt;hello, &lt;%= name %&gt;&lt;/p&gt;

// 入口文件，启用ejs
app.set(&apos;views&apos;, path.join(__dirname, &apos;myblog/views&apos;));// 设置存放模板文件的目录
app.set(&apos;view engine&apos;, &apos;ejs&apos;);// 设置模板引擎为 ejs
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/04/recording/mongodb使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rni-L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/04/recording/mongodb使用/" itemprop="url">mongodb使用</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-04T15:35:12+08:00">
                2017-08-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/记录/" itemprop="url" rel="index">
                    <span itemprop="name">记录</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/04/recording/mongodb使用/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/04/recording/mongodb使用/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/08/04/recording/mongodb使用/" class="leancloud_visitors" data-flag-title="mongodb使用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>记录了mongodb安装、配置和基本的使用</p>
</blockquote>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><ol>
<li>在官网下载你所需要的版本（我的是windows）</li>
<li>安装（可以指定目录）</li>
<li>windows是要配置环境变量，不然会出现闪退的情况</li>
</ol>
<p>在系统变量的PATH中，添加一个新的变量，是你mongodb下载的路径（我的是：C:\Program Files\MongoDB\Server\3.4\bin）</p>
<ol>
<li>可以选择你数据库文件放在的位置（好像默认是在C盘的）</li>
</ol>
<p>在命令行，进入到mongod.exe的目录下，输入：</p>
<pre><code>mongod.exe --dbpath h:\mongodb\data\db
</code></pre><p>这样就能更改数据库数据存放的位置</p>
<h1 id="moongodb可视化工具"><a href="#moongodb可视化工具" class="headerlink" title="moongodb可视化工具"></a>moongodb可视化工具</h1><p>我这里使用的是<code>studio 3T</code></p>
<p>到官网下载即可</p>
<p><a href="https://studio3t.com/" target="_blank" rel="external">https://studio3t.com/</a></p>
<h1 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h1><h2 id="常用词"><a href="#常用词" class="headerlink" title="常用词"></a>常用词</h2><p>将比较长的词进行简写：</p>
<ul>
<li>COLLECTION_NAME:CN（集合名）</li>
</ul>
<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><ul>
<li>show dbs：显示有什么数据库存在</li>
<li>show tables：显示集合</li>
<li>db：显示当前的数据库或集合</li>
<li>use db：连接特定的数据库</li>
<li>db.stats()：查看当前数据库信息</li>
<li>db.CN.stats()：查看当前集合的信息</li>
<li>db.serverStatus()：查看服务器状态</li>
</ul>
<h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><p>进入目标数据库后，执行：<code>db.dropDatabase()</code></p>
<h3 id="删除collection"><a href="#删除collection" class="headerlink" title="删除collection"></a>删除collection</h3><p><code>db.CN.drop()</code></p>
<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><p>find(), findOne()</p>
<pre><code>db.CN.find(query, projection)
</code></pre><ul>
<li>query ：可选，使用查询操作符指定查询条件</li>
<li>projection ：可选，使用投影操作符指定返回的键。查询时返回文档中所有键值，只需省略该参数即可（默认省略）</li>
</ul>
<p>例子：</p>
<pre><code>db.CN.find()
// 添加查询条件
db.CN.find({&apos;_id&apos;: 2})
// 只显示匹配到的第一条
db.CN.findOne()
// 美化查询结果
db.CN.find().pretty()
</code></pre><h4 id="数组查询"><a href="#数组查询" class="headerlink" title="数组查询"></a>数组查询</h4><p><code>$elemMath</code> 操作符为数组元素指定复合条件，以查询数组中至少一个元素满足所有指定条件的文档</p>
<pre><code>// 查询 finished 数组至少包含 一个大于 ($gt) 15 并且小于 ($lt) 20 
db.CN.find( { finished: { $elemMatch: { $gt: 15, $lt: 20 } } } )
</code></pre><h4 id="映射字段"><a href="#映射字段" class="headerlink" title="映射字段"></a>映射字段</h4><p>指定显示或排除哪些字段</p>
<p>1或true，为显示;0或false，为隐藏</p>
<p><code>_id</code>字段，默认显示</p>
<p>不能在映射文档中组合 包含和排除 语句</p>
<pre><code>// 显示所有字段
db.CN.find( { status: &quot;A&quot; } )

// 只显示&apos;_id&apos; , status&apos; 和 &apos;name&apos;
db.CN.find( { status: &quot;A&quot; }, { name: 1, status: 1 } )

// 只显示&apos;status&apos;
db.CN.find( { status: &quot;A&quot; }, { status: 1, _id: 0 } )

// 除了&apos;favorites&apos; 和 &apos;points&apos;，其他字段都显示
db.CN.find( { status: &quot;A&quot; }, { favorites: 0, points: 0 } )

// 包含 favorites 文档中的 food 字段（排除同理）
db.CN.find(
   { status: &quot;A&quot; },
   { name: 1, &quot;favorites.food&quot;: 1 }
)
// result
{ &quot;_id&quot; : 3, &quot;name&quot; : &quot;ahn&quot;, &quot;favorites&quot; : { &quot;food&quot; : &quot;cake&quot; } }
{ &quot;_id&quot; : 6, &quot;name&quot; : &quot;abc&quot;, &quot;favorites&quot; : { &quot;food&quot; : &quot;pizza&quot; } }

// 数组，points中的bonus字段（排除同理）
db.CN.find( { status: &quot;A&quot; }, { name: 1, &quot;points.bonus&quot;: 1 } )
// result
{ &quot;_id&quot; : 2, &quot;name&quot; : &quot;bob&quot;, &quot;points&quot; : [ { &quot;bonus&quot; : 20 }, { &quot;bonus&quot; : 12 } ] }
{ &quot;_id&quot; : 3, &quot;name&quot; : &quot;ahn&quot;, &quot;points&quot; : [ { &quot;bonus&quot; : 8 }, { &quot;bonus&quot; : 20 } ] }
</code></pre><h4 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h4><p>db.CN.find({name: /test/})</p>
<h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><p>insert() , insertOne() , insertMany()</p>
<p>添加字段，如果没有<code>_id</code>字段的话，会自动生成</p>
<p><code>db.CN.insert(document)</code></p>
<h4 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h4><pre><code>db.CN.insert({
  title: 1,
  name: &apos;name&apos;
})
</code></pre><h4 id="insertMany"><a href="#insertMany" class="headerlink" title="insertMany"></a>insertMany</h4><pre><code>// 插入多条数据
db.CN.insertMany(
   [
     { name: &quot;bob&quot;, age: 42, status: &quot;A&quot;, },
     { name: &quot;ahn&quot;, age: 22, status: &quot;A&quot;, },
     { name: &quot;xi&quot;, age: 34, status: &quot;D&quot;, }
   ]
)
</code></pre><p><code>insert</code>方法貌似都可以代替<code>insertOne</code>和<code>insertMany</code>，根据其他文章所知，<code>insert</code>在主要驱动程序已被弃用</p>
<p>同理，update,delete,find一样    </p>
<h3 id="更新文档"><a href="#更新文档" class="headerlink" title="更新文档"></a>更新文档</h3><p>update, updateOne, updateMany, replaceOne, save</p>
<h4 id="update"><a href="#update" class="headerlink" title="update"></a>update</h4><pre><code>db.CN.update(
  &lt;query&gt;,
  &lt;update&gt;,
  {
    upsert: &lt;boolean&gt;,
    multi: &lt;boolean&gt;,
    writeConcern: &lt;document&gt;
  }
)
</code></pre><h4 id="replaceOne"><a href="#replaceOne" class="headerlink" title="replaceOne"></a>replaceOne</h4><pre><code>// 替换&apos;name&apos; === &apos;abc&apos;那个文档
db.CN.replaceOne(
  { name: &quot;abc&quot; },
  { name: &quot;amy&quot;, age: 34, type: 2, status: &quot;P&quot;, favorites: { &quot;artist&quot;: &quot;Dali&quot;, food: &quot;donuts&quot; } }
)
</code></pre><h4 id="save"><a href="#save" class="headerlink" title="save"></a>save</h4><pre><code>db.CN.save({
  _id: 1
  title: 1,
  name: &apos;name&apos;
})
</code></pre><p>如果不指定id，和Insert一样，指定id，就会替换对应的数据</p>
<p>参数：</p>
<ul>
<li>query : update的查询条件</li>
<li>update : update的对象和值</li>
<li>upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入</li>
<li>multi : 可选，mongodb默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新</li>
<li>writeConcern :可选，抛出异常的级别</li>
</ul>
<p>例子：</p>
<pre><code>// 将&apos;_id&apos;为2的数据，&apos;title&apos;改为&apos;hahahahaha&apos;
// $set，可以单独处理某个字段
db.CN.update({&apos;_id&apos;: 2},{$set:{&apos;title&apos;:&apos;hahahahaha&apos;}})
</code></pre><h3 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h3><p>remove , deleteOne , deleteMany</p>
<h4 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h4><pre><code>db.CN.remove(
  &lt;query&gt;,
  {
    justOne: &lt;boolean&gt;,
    writeConcern: &lt;document&gt;
  }
)
</code></pre><ul>
<li>query :（可选）删除的文档的条件</li>
<li>justOne : （可选）如果设为 true 或 1，则只删除一个文档，默认false</li>
<li>writeConcern :（可选）抛出异常的级别</li>
</ul>
<p>例子：</p>
<pre><code>db.CN.remove{
  {&apos;_id&apos;: 2},
  {
    justOne: true // 删除全部匹配的
  }
}
// 清空数据库
db.CN.remove({})
</code></pre><h3 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h3><ul>
<li>(&gt;) 大于 - $gt</li>
<li>(&lt;) 小于 - $lt</li>
<li>(&gt;=) 大于等于 - $gte</li>
<li>(&lt;= ) 小于等于 - $lte</li>
<li>(!=) 不等于 - $ne</li>
<li>(or) 或者 - $or</li>
<li>$in （在相同的字段，使用$in而不是$or）</li>
</ul>
<p>例子：</p>
<pre><code>// 显示: &apos;likes&apos;大于100的数据
db.col.find({&quot;likes&quot; : {$gt : 100}})
// 显示：&apos;likes&apos;大于100且小于200的数据
db.col.find({likes : {$lt :200, $gt : 100}})
</code></pre><h4 id="AND"><a href="#AND" class="headerlink" title="AND"></a>AND</h4><pre><code>// status === &quot;A&quot; &amp;&amp; age &gt; 30
db.CN.find( { status: &quot;A&quot;, age: { $lt: 30 } } )
</code></pre><h4 id="OR"><a href="#OR" class="headerlink" title="OR"></a>OR</h4><pre><code>// status === &quot;A&quot; || age &gt; 30
db.CN.find(
   {
     $or: [ { status: &quot;A&quot; }, { age: { $lt: 30 } } ]
   }
)
</code></pre><h4 id="AND-和-OR-混用"><a href="#AND-和-OR-混用" class="headerlink" title="AND 和 OR 混用"></a>AND 和 OR 混用</h4><pre><code>// status === &quot;A&quot; &amp;&amp; ( age &gt; 30 || type === 1 )
db.CN.find(
  {
    status: &quot;A&quot;,
    $or: [ { age: { $lt: 30 } }, { type: 1 } ]
  }
)
</code></pre><h4 id="type"><a href="#type" class="headerlink" title="$type"></a>$type</h4><p>每种数据类型的$type值</p>
<ul>
<li>Double  1  </li>
<li>String  2  </li>
<li>Object  3  </li>
<li>Array 4  </li>
<li>Binary data 5  </li>
<li>Undefined 6 已废弃。</li>
<li>Object id 7  </li>
<li>Boolean 8  </li>
<li>Date  9  </li>
<li>Null  10   </li>
<li>Regular Expression  11   </li>
<li>JavaScript  13   </li>
<li>Symbol  14   </li>
<li>JavaScript (with scope) 15   </li>
<li>32-bit integer  16   </li>
<li>Timestamp 17   </li>
<li>64-bit integer  18   </li>
<li>Min key 255 Query with -1.</li>
<li><p>Max key 127</p>
<p>  // 获取到’title’是字符串的数据<br>  db.CN.find({“title” : {$type : 2}})</p>
</li>
</ul>
<h3 id="set"><a href="#set" class="headerlink" title="$set"></a>$set</h3><pre><code>// 只修改某个字段
db.CN.update(id: 1, { $set: { name: &apos;123&apos; } })
</code></pre><h3 id="其他的一些方法"><a href="#其他的一些方法" class="headerlink" title="其他的一些方法"></a>其他的一些方法</h3><h4 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h4><p>限制读取数据的数量</p>
<pre><code>// 限制读取的数量为2
db.CN.find({},{&quot;title&quot;:1,_id:0}).limit(2)
</code></pre><h4 id="skip"><a href="#skip" class="headerlink" title="skip"></a>skip</h4><p>从第几个开始</p>
<pre><code>// 获取匹配到的数据，从第10行开始显示
db.CN.find().skip(10)

//混合使用，获取匹配到的数据，从10开始获取，获取100个
db.CN.find().skip(10).limit(100)
</code></pre><h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><p>排序，1和-1，1为升序，-1为降序。</p>
<p>sort() =&gt; skip() =&gt; limit()</p>
<pre><code>// 以key值，升序排序
db.CN.find().sort({KEY:1})
</code></pre><h4 id="aggregate-gt-聚合"><a href="#aggregate-gt-聚合" class="headerlink" title="aggregate() =&gt; 聚合"></a>aggregate() =&gt; 聚合</h4><h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><h3 id="mongodb组成"><a href="#mongodb组成" class="headerlink" title="mongodb组成"></a>mongodb组成</h3><ol>
<li>database：数据库</li>
<li>collection：集合（表）</li>
<li>document：文档（row）</li>
<li>field：域（字段）</li>
<li>index：索引</li>
<li>primary key（主键，自动将_id设置为主键）</li>
</ol>
<p>BSON是一种类json的一种二进制形式的存储格式,简称Binary JSON</p>
<p>mongodb可以说是json的格式</p>
<h4 id="document"><a href="#document" class="headerlink" title="document"></a>document</h4><p>文档是一组<strong>键值（Key-value）</strong>对</p>
<h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><ol>
<li>文档的键/值对是<strong>有序</strong>的</li>
<li>不仅可以是在双引号里面的字符串，还可以是其他几种数据类型</li>
<li>区分类型和大小写</li>
<li>不能有重复的键</li>
<li>文档的键是字符串。除了少数例外情况，键可以使用任意UTF-8字符</li>
</ol>
<h5 id="命名规范"><a href="#命名规范" class="headerlink" title="命名规范"></a>命名规范</h5><ol>
<li>键不能含有\0（空字符）</li>
<li>.和$有特别意义</li>
<li>以’_’开头的键是保留（不推荐）</li>
</ol>
<h4 id="collection"><a href="#collection" class="headerlink" title="collection"></a>collection</h4><h5 id="命名规范-1"><a href="#命名规范-1" class="headerlink" title="命名规范"></a>命名规范</h5><ol>
<li>不能说空字符串</li>
<li>不能含有\0（空字符）</li>
<li>不能以’system.’开头</li>
</ol>
<h5 id="capped-collections"><a href="#capped-collections" class="headerlink" title="capped collections"></a>capped collections</h5><p>固定大小的collection，性能更好</p>
<p>collection的数据存储空间值要提前分配</p>
<p><code>db.createCollection(&quot;mycoll&quot;, {capped:true, size:100000})</code></p>
<h4 id="元数据"><a href="#元数据" class="headerlink" title="元数据"></a>元数据</h4><p>数据库的信息存储在集合中</p>
<p><code>dbname.system.*</code></p>
<ul>
<li>.namespaces：列出所有名字空间</li>
<li>.indexes：列出所有索引</li>
<li>.profile：包含数据库概要信息</li>
<li>.CN：列出所有可访问数据库的用户</li>
<li>.sources：包含复制对端的服务器信息和状态</li>
</ul>
<h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><ul>
<li>String，在MongoDB中，UTF-8编码的字符串才是合法的</li>
<li>Integer，整型，32位或64位</li>
<li>Boolean</li>
<li>Double，双精度浮点值</li>
<li>Min/Max keys，将一个值与BSON元素的最低值和最高值相对比</li>
<li>Arrays，数组或列表</li>
<li>Timestamp，时间戳</li>
<li>Object：内嵌文档</li>
<li>Null</li>
<li>Symbol，符号</li>
<li>Date：日期时间</li>
<li>Object ID，对象ID，用于创建文档的ID</li>
<li>Binary Data：二进制数据</li>
<li>Code：代码类型，用于在文档存储javascript代码</li>
<li>Regular expression：正则</li>
</ul>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><ul>
<li>本地：<code>mongodb://localhost</code></li>
<li>有用户名和密码：<code>mongodb://user:pwd@localhost</code></li>
<li>数据库：<code>mongodb://fred:foobar@localhost/db</code></li>
<li>连接服务器1和服务器2：<code>mongodb://example1.com:27017,example2.com:27017</code></li>
</ul>
<h3 id="调试功能"><a href="#调试功能" class="headerlink" title="调试功能"></a>调试功能</h3><p><code>explain()</code> </p>
<pre><code>db.CN.find().explain()
</code></pre><p>上面的代码，可以解析当前查询工作的详细情况</p>
<p>使用 <code>.explain( &quot;executionStats&quot; )</code> 可以查看操作耗费了多少时间</p>
<h3 id="添加管理用户"><a href="#添加管理用户" class="headerlink" title="添加管理用户"></a>添加管理用户</h3><p>monogodb 默认不需要用户的，而且是没有用户的，超级管理员也没有，需要自己手动添加的。</p>
<p>首先，我们先在 mongodb 添加用户。比如，我现在要在 admin 数据库添加用户</p>
<pre><code>use admin
db.createUser(
  {
    user: &quot;admin&quot;,
    pwd: &quot;123&quot;,
    roles: [ { 
      role: &quot;readWrite&quot;,
      db: &quot;admin&quot; // 添加到 admin db里
    } ]
  }
)
</code></pre><p>这样们就在 admin 库里添加了一个用户，可以使用 <code>db.system.users.find()</code> 查看当前库的用户</p>
<p>但是这个用户在其他库是用不了的，比如我想在 test 这个数据库登录用户： <code>db.auth(&#39;admin&#39;, &#39;123&#39;)</code> ，会登录不了的，我们要在 test 再添加一个新的用户才可以</p>
<p>其他一些用户权限：</p>
<table>
<thead>
<tr>
<th>角色</th>
<th>介绍 </th>
</tr>
</thead>
<tbody>
<tr>
<td> read</td>
<td>只读</td>
</tr>
<tr>
<td> readWrite</td>
<td>读写</td>
</tr>
<tr>
<td> dbAdmin</td>
<td>提供执行管理任务的能力，如模式相关任务，索引，收集统计信息。此角色不授予用户和角色管理权限</td>
</tr>
<tr>
<td> dbOwner</td>
<td>提供对数据库执行任何管理操作的功能</td>
</tr>
<tr>
<td> userAdmin</td>
<td>创建修改角色和用户功能</td>
</tr>
</tbody>
</table>
<p>还有很多，详细看<a href="https://docs.mongodb.com/manual/core/security-built-in-roles/" target="_blank" rel="external">官方文档</a></p>
<p>然后就是修改配置文件，这里的教程是 centos 的</p>
<p>根目录，执行 <code>vim etc/mongod.conf</code></p>
<p>添加或者修改以下这段代码</p>
<pre><code>security:
  authorization: enabled
</code></pre><p>然后重启 mongodb ， <code>service mongod restart</code> ，再次进入 <code>mongo</code> ，就需要 <code>db.auth()</code> 后，才能进行相应的操作了</p>
<p>然后再数据库连接上，也需要配上用户和密码</p>
<pre><code>mongoose.connect(`mongodb://user:pwd@localhost/test`, { useMongoClient: true })
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/02/recording/hexo操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rni-L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/02/recording/hexo操作/" itemprop="url">hexo操作</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-02T11:42:13+08:00">
                2017-08-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/记录/" itemprop="url" rel="index">
                    <span itemprop="name">记录</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/02/recording/hexo操作/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/08/02/recording/hexo操作/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/08/02/recording/hexo操作/" class="leancloud_visitors" data-flag-title="hexo操作">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>记录平常常用的hexo操作</p>
</blockquote>
<h1 id="hexo安装"><a href="#hexo安装" class="headerlink" title="hexo安装"></a>hexo安装</h1><pre><code>// 在全局安装hexo
npm i hexo -g
</code></pre><h1 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h1><ol>
<li>先在博客根目录里，<code>git clone</code>你要安装的主题</li>
<li>在博客的<code>_config.yml</code>配置文件中，修改<code>themes</code></li>
<li>完成</li>
</ol>
<p>每个主题，作者都会有配置介绍的，根据配置来调整就好了。</p>
<h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><ol>
<li>hexo n ‘name’ – 新建文章</li>
<li>hexo clean – 清除缓存（根据网上文章，每次上传前，都要先清除缓存）</li>
<li>hexo s – 开发模式</li>
<li>hexo g – 生成文件</li>
<li>hexo d – 上传文件</li>
</ol>
<h1 id="设置分类"><a href="#设置分类" class="headerlink" title="设置分类"></a>设置分类</h1><p>每篇文章中的tag下面加上<code>categories:</code>，就会自动生成你想要的分类了，还可以在根目录文件中，<code>scaffolds/post.md</code>加上<code>categories:</code>，这样就会自动添加分类了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/23/life/日记-独立的第一天-7-23/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rni-L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/23/life/日记-独立的第一天-7-23/" itemprop="url">日记-独立的第一天-7.23</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-23T21:44:01+08:00">
                2017-07-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/life/" itemprop="url" rel="index">
                    <span itemprop="name">life</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/07/23/life/日记-独立的第一天-7-23/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/07/23/life/日记-独立的第一天-7-23/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/07/23/life/日记-独立的第一天-7-23/" class="leancloud_visitors" data-flag-title="日记-独立的第一天-7.23">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>今天是自己真正独立的第一天，搬出家里，自己一个人住，自己照顾自己。。。</p>
</blockquote>
<p>今天下午，把东西都搬到了广州的新家，除了我的猫和一些杂物还在家中。猫咪因为刚做完绝育手术，过几天还要去复诊，拆线，所以就先放在家里。</p>
<p>稍微把东西整理了下，然后出去黄埔古村溜达一下，看看周围的情况，发现吃的还不小，而且不怎么贵。然后吃了个饭，才10块钱，感觉还是挺便宜的，虽然不怎么好吃。再去超市买了点生活用品，就回家洗澡洗衣服了。不知不觉就8点多了，写了下代码，和朋友聊了下天，不知道今晚什么时候才能睡着了。</p>
<p>自己搬出来住后，第一感觉，还是有点寂寞，感觉舍不得家里人，比高中、大学出去住宿，遭得多，高中大学住宿的时候，起码有同学、舍友的陪伴，而现在就只有一个人了，聊天只能通过网络和手机。还是真人聊天实在点。</p>
<p>生活还是不容易啊，稍微买了点日常用品和办公桌等等，花了不少钱，而且每月还是交房租、水电费等等，杂七杂八，一切都要靠自己啦。不过我觉得这是锻炼自己的机会，我是想自己一个人生活，锻炼自己，才搬出来住的，不然就应聘佛山的工作了。要对时间有更好的把控，在家里没什么心思学习啊，做事都是半途而废，看看一年的生活会变得怎么样吧，加油！</p>
<p><img src="./images/diary_1.jpg" alt="小花"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/17/recording/linux指令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rni-L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/17/recording/linux指令/" itemprop="url">linux指令和操作</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-17T21:28:17+08:00">
                2017-07-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/记录/" itemprop="url" rel="index">
                    <span itemprop="name">记录</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/07/17/recording/linux指令/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/07/17/recording/linux指令/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/07/17/recording/linux指令/" class="leancloud_visitors" data-flag-title="linux指令和操作">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>最要记录我平时用的linux指令，方便查找</p>
</blockquote>
<ul>
<li>ls : 显示当前目录的文件</li>
<li><p>cd : 进入某个文件</p>
</li>
<li><p>service nginx / mysql / vsftpd restart : 重启服务</p>
</li>
<li>cat …. : 查看某个文件</li>
<li>vi …. : 编辑某个文件</li>
<li>:q …. : 编辑文件时，不保存退出</li>
<li>:w …. : ….保存</li>
<li>:q, :w … : 强制退出或保存</li>
<li>:qw … : ….保存并退出</li>
<li>rm -rf … : 删除文件夹，包括本身</li>
<li>rm -f … : 删除文件</li>
<li>unzip : 解压zip压缩包（在服务器解压，更快）</li>
<li>clear l : 清屏  </li>
<li><p>netstat -plntu : 查看端口</p>
</li>
<li><p>chmod -R 777 xxx : 给权限</p>
</li>
<li>netstat -tunpl : 查看端口</li>
</ul>
<h2 id="centos"><a href="#centos" class="headerlink" title="centos"></a>centos</h2><p>我用的是<code>centos</code> ， <code>centos</code> 使用 <code>yum</code> 进行包的管理</p>
<p><code>yum -y install nginx</code> 直接按照 <code>nginx</code> 和 所依赖的包</p>
<p><code>service nginx start</code> 就能开启服务，不用带路径那样输入命令开启服务</p>
<h2 id="nginx-配置"><a href="#nginx-配置" class="headerlink" title="nginx 配置"></a>nginx 配置</h2><p><code>yum</code> 安装的 <code>nginx</code> 在 <code>etc/nginx</code></p>
<h2 id="linux-安装git"><a href="#linux-安装git" class="headerlink" title="linux 安装git"></a>linux 安装git</h2><p>如果有<code>yum</code></p>
<p><code>yum install git-core</code></p>
<p>安装完毕后，设置用户</p>
<p><code>git config --global user.name &quot;Your Name&quot;</code></p>
<p><code>git config --global user.email &quot;youremail@domain.com&quot;</code></p>
<p>设置ssh<code>ssh-keygen -t rsa -C &quot;youremail@163.com&quot;</code>，连续回车即可</p>
<p><code>cat ~/.ssh/id_rsa.pub</code>，复制ssh，在<code>github</code>添加</p>
<h2 id="安装nvm"><a href="#安装nvm" class="headerlink" title="安装nvm"></a>安装nvm</h2><p><code>curl https://raw.githubusercontent.com/creationix/nvm/v0.30.2/install.sh | bash</code></p>
<p>查看所有<code>node</code>版本：<code>nvm ls-remote node</code></p>
<p>安装指定版本<code>node</code>：<code>nvm install v6.9.4</code></p>
<p>使用指定版本：<code>nvm use v6.9.4</code></p>
<p>设置默认版本：<code>nvm alias default v4.6.0</code></p>
<h2 id="安装node包"><a href="#安装node包" class="headerlink" title="安装node包"></a>安装node包</h2><p>安装淘宝镜像：<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code></p>
<h2 id="安装mongodb"><a href="#安装mongodb" class="headerlink" title="安装mongodb"></a>安装mongodb</h2><p>设置配置文件<code>vim /etc/yum.repos.d/mongodb-org-3.4.repo</code></p>
<p>添加以下内容：</p>
<pre><code>[mongodb-org-3.4]  
name=MongoDB Repository  
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/  
gpgcheck=1  
enabled=1  
gpgkey=https://www.mongodb.org/static/pgp/server-3.4.asc  
</code></pre><p>开始安装<code>mongodb</code>：<code>yum -y install mongodb-org</code></p>
<p>安装完后，<code>log</code>和<code>db</code>位置都配置好了</p>
<p><code>systemctl start mongod.service</code> // <code>service mongod start</code> ，开启mongodb服务</p>
<p><code>systemctl status mongod.service</code>，查看mongodb开启状态</p>
<p>如果<code>Active</code>不是<code>active</code>，就是失败了。查看<code>/var/log/mongodb/mongod.log</code>日志，看看是否有这样的错误<code>Failed to unlink socket file /tmp/mongodb-27017.sock Operation not permitted</code>，如果有，就去<code>/tmp</code>下，删除那个<code>.sock</code>文件。然后重新运行成功</p>
<h2 id="操作mongodb"><a href="#操作mongodb" class="headerlink" title="操作mongodb"></a>操作mongodb</h2><p><code>mongo</code>，运行<code>shell</code></p>
<h2 id="nodejs-nginx配置"><a href="#nodejs-nginx配置" class="headerlink" title="nodejs - nginx配置"></a>nodejs - nginx配置</h2><p>阿里云配置<code>DNS</code></p>
<pre><code>server {
  listen 80;
  server_name canvas-Image-processing.rni-l.com;

  charset utf-8;

  location / {
    proxy_pass  http://localhost:6363/;

    proxy_set_header  Host  $host;
    proxy_set_header  X-Real-IP  $remote_addr;
    proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;
  }
}
</code></pre><p>pkill php-fpm: 关闭php-fpm<br><a href="https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/" target="_blank" rel="external">https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/11/technology/移动端布局方式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rni-L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/11/technology/移动端布局方式/" itemprop="url">移动端布局方式</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-11T15:06:16+08:00">
                2017-07-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/教程/" itemprop="url" rel="index">
                    <span itemprop="name">教程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/07/11/technology/移动端布局方式/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/07/11/technology/移动端布局方式/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/07/11/technology/移动端布局方式/" class="leancloud_visitors" data-flag-title="移动端布局方式">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>这篇文章，主要是总结一下，我在移动端布局用过的方法。有三种，一种是响应式布局，利用@meida判断各个size；第二种是REM；最后是设置viewport中的width。</p>
</blockquote>
<h2 id="响应式布局"><a href="#响应式布局" class="headerlink" title="响应式布局"></a>响应式布局</h2><p>这种感觉是最好理解了，利用@media进行断点，在每个断点中编写css。</p>
<pre><code>@media (max-width:768px){
    //css
}
</code></pre><p>上面这段代码，在浏览器的宽度低于768时有效。同理，如果把<code>max</code>换成<code>min</code>，就会变成高于768时有效。可以设置宽度，也可以设置高度，也可以同时设置多个值。</p>
<p>在<a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Media_queries" target="_blank" rel="external">MDN,@media</a>上，发现很多值都可以做判断的。宽，高，宽高比，颜色（这个是指定输出设备每个像素单位的比特值），是否横屏或竖屏，还有很多，可以去MDN看看。</p>
<h3 id="媒体类型"><a href="#媒体类型" class="headerlink" title="媒体类型"></a>媒体类型</h3><p>@meida还可以根据媒体类型进行断点。</p>
<ul>
<li>all，所有设备</li>
<li>print，打印</li>
<li>screen，彩色的电脑屏幕</li>
<li>speech，不知道什么来的。</li>
</ul>
<h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><pre><code>@media (max-width:1000px){
    div{background:blue;}
}
@media (min-width:1000px) and (max-width:1150px){
    div{background: yellow;}
}
@media only screen and (max-width:1150px){
    div{border:solid 1px;}
}
@media not print and (max-width:1150px){
    div{border-radius:50%;}
}
</code></pre><ul>
<li>and，就是‘和’的意思，前后两个条件都达到时</li>
<li>only，唯一</li>
<li>not，除了这个之外</li>
</ul>
<p>上面4个@media，分别的效果是：</p>
<ol>
<li>当浏览器宽度低于1000px时</li>
<li>当浏览器宽度大于1000px 和 小于1150px时</li>
<li>当在屏幕上显示 和 宽度小于1150px时</li>
<li>除了在打印上显示外 和 宽度小于1150px时</li>
</ol>
<h3 id="按需‘加载’css"><a href="#按需‘加载’css" class="headerlink" title="按需‘加载’css"></a>按需‘加载’css</h3><p>@media还可以用在link标签上。</p>
<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/1.css&quot; media=&apos;(max-width:500px)&apos;&gt;
</code></pre><p>当浏览器宽度低于500px时，<code>1.css</code>的样式才会有效果。但这不代表大于500px时，就没加载了<code>1.css</code>。使用了<code>@media</code>属性后，只会让你当条件符合了，才让对应的css文件有效果。而且用这种方式有一个好处，就是不用在css里写<code>@media</code>。</p>
<p><img src="./images/rem_4.jpg" alt="效果图"></p>
<h3 id="平常响应式网站的开发"><a href="#平常响应式网站的开发" class="headerlink" title="平常响应式网站的开发"></a>平常响应式网站的开发</h3><p>平时响应式网站的开发，我都会先对比PC和MOBILE的设计稿，看看有什么区别，然后才进行编写css。通常都是使用<code>flex</code>。宽度尽量用百分比，间距、高度、字体大小使用 <code>em</code>，就可以很方便的进行大小的控制。</p>
<h2 id="REM"><a href="#REM" class="headerlink" title="REM"></a>REM</h2><p>REM这个单位，会根据html的<code>font-size</code>大小进行转换。</p>
<pre><code>html{font-size:100px;}
p{padding-top:.5rem;}
</code></pre><p>.5rem = 50px / 100</p>
<p>转换后p的<code>padding-top</code>就是<code>50px</code>了。只要我们进行适当的计算，当前屏幕的宽度，html的<code>font-size</code>是多少px就OK了。</p>
<h3 id="如何计算当前html的font-size值"><a href="#如何计算当前html的font-size值" class="headerlink" title="如何计算当前html的font-size值"></a>如何计算当前html的font-size值</h3><p>比如，我们拿到的设计稿是750px，那就设置成当屏幕宽度是750的时候，html的<code>font-size</code>就是<code>100px</code>（当然这个100px你可以随意设置的，我设置成100px只是方便我计算），然后就根据当前屏幕的宽度 / 750 * 100，就得到了当前屏幕宽度的<code>font-size</code>值。</p>
<pre><code>//当前屏幕宽度 / 750 = 当前屏幕宽度的font-size / 100
//代码如下
(function (doc, win) {
    var docEl = doc.documentElement,
    resizeEvt = &apos;orientationchange&apos; in window ? &apos;orientationchange&apos; : &apos;resize&apos;,
    recalc = function () {
      var clientWidth = docEl.clientWidth;
      if (!clientWidth) return;
      docEl.style.fontSize = 100 * (clientWidth / 750) + &apos;px&apos;;
    };

    if (!doc.addEventListener) return;
       win.addEventListener(resizeEvt, recalc, false);
       doc.addEventListener(&apos;DOMContentLoaded&apos;, recalc, false);
})(document, window);
</code></pre><p>上面这段代码，是直接根据屏幕宽度进行计算font-size的。而<a href="https://github.com/amfe/article/issues/17" target="_blank" rel="external">淘宝移动端REM方案</a>，还根据你的dpr去计算，而且会进行整体的缩放。淘宝的这种方案，比上面的代码会好很多。</p>
<p><img src="/images/rem_2.png" alt="第一种方案"></p>
<p><img src="/images/rem_1.jpg" alt="第二种方案"></p>
<p>大家注意边框的大小。第二张图的边框是比第一张图的小的，两个都是<code>border:solid 1px</code>。其他的边距都是一样。淘宝的方案，解决了另一个问题：边框1px的问题。</p>
<p>大家可以打开以下链接，看看具体的效果：</p>
<p><a href="http://www.rni-l.com/mobile/index2.html" target="_blank" rel="external">第一种方案</a></p>
<p><a href="http://www.rni-l.com/mobile/index.html" target="_blank" rel="external">第二种方案</a></p>
<h3 id="淘宝移动端REM"><a href="#淘宝移动端REM" class="headerlink" title="淘宝移动端REM"></a>淘宝移动端REM</h3><p>这个很简单，只需要加载js就好了</p>
<pre><code>&lt;script src=&quot;http://g.tbcdn.cn/mtb/lib-flexible/{{version}}/??flexible_css.js,flexible.js&quot;&gt;&lt;/script&gt;
</code></pre><p>然后在css中，将px转为rem就好了。我是用scss的，所以写个函数就好了。</p>
<pre><code>@function s($px) {
    @return ($px / 75) * 1rem;
}
p{
    font-size:s(40);padding-left: s(52);
}
</code></pre><p>比如p的<code>font-size</code>在750的设计稿是<code>40px</code>，然后<code>s(40)</code>就OK了。</p>
<h2 id="设置viewport中的width"><a href="#设置viewport中的width" class="headerlink" title="设置viewport中的width"></a>设置viewport中的width</h2><p>这种方案，就是定死viewport中的width大小。</p>
<p>比如设计稿是750的，然后就在代码上写：</p>
<pre><code>&lt;met name=&apos;viewport&apos; content=&apos;width=750&apos; /&gt;
</code></pre><p>我们用同样的页面，看看效果是怎么样</p>
<p><img src="/images/rem_3.jpg" alt="第一种方案"></p>
<p>链接：<a href="http://www.rni-l.com/mobile/index3.html" target="_blank" rel="external">第三种方案</a></p>
<p>效果和第二种是一样的，在手机上看也是。</p>
<pre><code>.top{
    display: flex;align-items:center;padding:50px 0 113.5px;justify-content:space-between;width:100%;
    p{
        font-size:40px;padding-left:52px;
    }
    img{
        width:71.5px;height: 71.5px;display: block;margin-right: 63.5px;
    }
}
</code></pre><p>而代码是直接使用px的，定死的。</p>
<p>感觉从效果上来看，是很完美的，但是为什么不是这种方法最流行？</p>
<pre><code>@media screen and (max-width:360px){
    .box{color:red;}
}

@media screen and (max-width:520px){
    .box{color:black;}
}

@media screen and (max-width:750px){
    .box{color:yellow;}
}
</code></pre><p>我在iphone7，小米5s，谷歌浏览器模拟的iphone6plus上，字体颜色都是<strong>黄色</strong>的。所以<code>@media</code>媒体查询是无法使用的，因为已经将宽度定死了。而REM方案却可以使用媒体查询的。因为移动端有很多奇怪的大小，而且在不同的浏览器或者微信上，高度都是不同的，所以可能会造成间距有很大的问题。</p>
<pre><code>window.screen.width
</code></pre><p>用js，可以获取当前设备的宽度。</p>
<h2 id="对比三种方式"><a href="#对比三种方式" class="headerlink" title="对比三种方式"></a>对比三种方式</h2><h3 id="响应式的优缺点"><a href="#响应式的优缺点" class="headerlink" title="响应式的优缺点"></a>响应式的优缺点</h3><p>优点：兼容性好，@media在ie9以上是支持的，PC和MOBILE是同一套代码的，不用分开。</p>
<p>缺点：要写得css相对另外两个多很多，而且各个断点都要做好。css样式会稍微大点，更麻烦。</p>
<h3 id="REM优缺点"><a href="#REM优缺点" class="headerlink" title="REM优缺点"></a>REM优缺点</h3><p>优点：能维持能整体的布局效果，移动端兼容性好，不用写多个css代码，而且还可以利用@media进行优化。</p>
<p>缺点：开头要引入一段js代码，单位都要改成rem(font-size可以用px)，计算rem比较麻烦(可以引用预处理器，但是增加了编译过程，相对麻烦了点)。pc和mobile要分开。</p>
<h3 id="设置viewport中的width-1"><a href="#设置viewport中的width-1" class="headerlink" title="设置viewport中的width"></a>设置viewport中的width</h3><p>优点：和REM相同，而且不用写rem，直接使用px，更加快捷。</p>
<p>缺点：效果可能没rem的好，图片可能会相对模糊，而且无法使用@media进行断点，不同size的手机上显示，高度间距可能会相差很大。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>还是看项目需求，再决定使用哪种方案，如果就手机站的话，我使用REM比较多。如果对距离比较精确的话，大量css3动画的，就使用第三种。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/logo.gif"
               alt="Rni-L" />
          <p class="site-author-name" itemprop="name">Rni-L</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">26</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/yiiouo" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rni-L</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  

    
      <script id="dsq-count-scr" src="https://https-yiiouo-github-io.disqus.com/count.js" async></script>
    

    

  











  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("vD9lHLi5QOmwQClMGaq1YWsW-gzGzoHsz", "O9GPrsAJNYIaQClj8yNKSrFH");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

  

</body>
</html>
